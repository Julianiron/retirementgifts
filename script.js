const AllgiftIdeas = [
  // Clothes
  { category: "Clothes", 
	title: "'Retired' Tee-Shirt", 
	description: "This career tee makes a great gift for your friend who wants to retire.", 
	image: "Tee Shirt.jpg", 
	price: 120.00,
	url: "https://a.co/d/9BKVkO1" },
	
  { category: "Clothes", 
	title: "Custom Photo Album", 
	description: "A professionally bound album of career highlights and memories", 
	image: "album.jpg" },
  
  { category: "Clothes", title: "Name Plaque", description: "Elegant desk plaque with years of service inscription", image: "plaque.jpg" },
  { category: "Clothes", title: "Memory Book", description: "Collaborative book with messages from colleagues", image: "memory-book.jpg" },
  { category: "Clothes", title: "Custom Portrait", description: "Commissioned artwork or caricature", image: "portrait.jpg" },
  { category: "Clothes", title: "Retirement Signature Frame", description: "Frame with company logo and space for signatures", image: "frame.jpg" },
  { category: "Clothes", title: "Monogrammed Leather Goods", description: "Luxury leather portfolio or wallet with initials", image: "leather.jpg" },
  { category: "Clothes", title: "Custom Bobblehead", description: "Personalized figurine that resembles the retiree", image: "bobblehead.jpg" },
  
  // Travel Accessories
  { category: "Travel Accessories", title: "Luxury Luggage Set", description: "High-quality luggage for upcoming adventures", image: "luggage.jpg" },
  
  { category: "Travel Accessories", 
	title: "Travel Journal", 
	description: "Beautiful journal to document retirement travels", 
	image: "travel-journal.jpg",
	price: 89.99,
	url: "https://a.co/d/79QrXNV" },
	
  { category: "Travel Accessories", title: "Premium Passport Holder", description: "Leather passport cover with RFID protection", image: "passport.jpg" },
  { category: "Travel Accessories", title: "Noise-Cancelling Headphones", description: "Perfect for long flights and peaceful journeys", image: "headphones.jpg" },
  { category: "Travel Accessories", title: "Travel Pillow Set", description: "Comfort essentials for long journeys", image: "travel-pillow.jpg" },
  { category: "Travel Accessories", title: "Portable Power Bank", description: "Keep devices charged while on the go", image: "power-bank.jpg" },
  { category: "Travel Accessories", title: "Travel Photography Kit", description: "Smartphone lens attachments for capturing memories", image: "photo-kit.jpg" },
  { category: "Travel Accessories", title: "Personalized Luggage Tags", description: "Custom tags to easily identify luggage", image: "luggage-tags.jpg" },
  
  // Relaxation Items
  { category: "Relaxation Items", 
	title: "'Retirement Rules' Blanket", 
	description: "Soft blanket for long retirement naps.", 
	image: "blanket.jpg",
	price: 89.99,
	url: "https://a.co/d/24hRNfY" },
	
  { category: "Relaxation Items", 
	title: "Custom Dice", 
	description: "What are you gonna do today? Roll the dice and find out.", 
	image: "dice.jpg",
	price: 89.99,
	url:"https://www.etsy.com/listing/1733536704/custom-stainless-steel-dice-personalized?ga_order=most_relevant&ga_search_type=all&ga_view_type=gallery&ga_search_query=funny+retirement+gifts&ref=sr_gallery-1-38&pro=1&frs=1&sts=1&content_source=33814b36e04c37426b268a1dd9f24c3d9935b961%253A1733536704&search_preloaded_img=1&organic_search_click=1&logging_key=33814b36e04c37426b268a1dd9f24c3d9935b961%3A1733536704" },
  
  
  
  { category: "Relaxation Items", title: "Luxury Bathrobe", description: "Plush, hotel-quality robe for everyday comfort", image: "bathrobe.jpg" },
  { category: "Relaxation Items", title: "Weighted Blanket", description: "Therapeutic blanket for better sleep and relaxation", image: "blanket2.jpg" },
  { category: "Relaxation Items", title: "Essential Oil Diffuser", description: "Aromatherapy system for home relaxation", image: "diffuser.jpg" },
  { category: "Relaxation Items", title: "Meditation Subscription", description: "Premium access to guided meditation app", image: "meditation.jpg" },
  
  
  { category: "Relaxation Items", 
	title: "Hammock", 
	description: "Comfortable outdoor relaxation spot.", 
	image: "hammock.jpg",
	price: 89.99,	
	url: "https://www.homedepot.com/p/VEVOR-Double-Quilted-Fabric-Hammock-12-FT-Double-Hammock-with-Curved-Spreader-Bars-2-Person-Quilted-Hammock-HFDCMBSCSBDZJY16NV0/330407721#overlay"},
	
	
	
  { category: "Relaxation Items", title: "Tea Collection", description: "Premium teas from around the world", image: "tea.jpg" },
  
  // Technology
  { category: "Technology", title: "Tablet", description: "Latest tablet for reading, browsing, and entertainment", image: "tablet.jpg" },
  { category: "Technology", title: "E-Reader", description: "Dedicated device for the book lover", image: "e-reader.jpg" },
  { category: "Technology", title: "Smart Home Starter Kit", description: "Begin automating the home for convenience", image: "smart-home.jpg" },
  { category: "Technology", title: "Wireless Earbuds", description: "Premium sound without the wires", image: "earbuds.jpg" },
  { category: "Technology", title: "Fitness Tracker", description: "Monitor health and activity in retirement", image: "fitness-tracker.jpg" },
  { category: "Technology", title: "Digital Photo Frame", description: "Display rotating photos of family and memories", image: "digital-frame.jpg" },
  { category: "Technology", title: "Smartphone", description: "Latest model to stay connected", image: "smartphone.jpg" },
  { category: "Technology", title: "Streaming Device", description: "Access to entertainment services for movie nights", image: "streaming.jpg" },
  
  // Experiences
  { category: "Experiences", title: "Cooking Class", description: "Learn from professional chefs in hands-on sessions", image: "cooking-class.jpg" },
  { category: "Experiences", title: "Concert Tickets", description: "Tickets to see favorite performers live", image: "concert.jpg" },
  { category: "Experiences", title: "Travel Voucher", description: "Contribution toward dream destination", image: "travel-voucher.jpg" },
  { category: "Experiences", title: "Wine Tasting Tour", description: "Guided tour of local vineyards with tastings", image: "wine-tour.jpg" },
  { category: "Experiences", title: "Hot Air Balloon Ride", description: "Scenic flight for a new perspective", image: "balloon.jpg" },
  { category: "Experiences", title: "Theater Season Tickets", description: "Regular entertainment throughout the year", image: "theater.jpg" },
  { category: "Experiences", title: "Sports Event Tickets", description: "See favorite team play in person", image: "sports.jpg" },
  { category: "Experiences", title: "Museum Membership", description: "Year-round access to exhibitions and events", image: "museum.jpg" },
  
  // Home
  { category: "Home", 
	title: "Lavender Scented Soy Wax Candle", 
	description: "Brighten up the retirement celebration with a personal and humorous touch.", 
	image: "Lavender candle.jpg",
	price: 89.99,
	url: "https://a.co/d/gOS4OCx" },
  
  { category: "Home", 
	title: "Guest Book Set", 
	description: "Cllect some advice and wishes for your colleague or friend.", 
	image: "guest-book.jpg",
	price: 89.99,
	url:"https://a.co/d/iHUBw4R" },
	
  { category: "Home", title: "Indoor Plant Collection", description: "Set of low-maintenance plants for home", image: "plants.jpg" },
  { category: "Home", title: "Decorative Clock", description: "Statement timepiece for the home", image: "clock.jpg" },
  { category: "Home", title: "Personalized Door Sign", description: "Custom sign for home office or workshop", image: "door-sign.jpg" },
  { category: "Home", title: "Luxury Throw Pillows", description: "Comfortable accent pieces for relaxation", image: "pillows.jpg" },
  
  { category: "Home", 
	title: "Weather Station", 
	description: "Home device to monitor local conditions", 
	image: "weather-station.jpg",
	price: 89.99,	
	url: "https://www.homedepot.com/p/AcuRite-Color-Weather-Station-02077M/206876311" },
	
  { category: "Home", title: "Custom Star Map", description: "Night sky as it appeared on their retirement date", image: "star-map.jpg" },
  
  // Books
  { category: "Books", 
	title: "101 Fun Things To Do...", 
	description: "An Irreverent, Outrageous & Funny Guide to Life After Work.", 
	image: "Book - 101 fun things to do.jpg",
	price: 89.99,
	url: "https://a.co/d/1PcRPux" },
  
  { category: "Books", 
	title: "You're Only Old Once", 
	description: "A Book for Obsolete Children.", 
	image: "only old once.jpg",
	price: 89.99,
	url: "https://a.co/d/9qQ1zuK" },
	
  { category: "Books", 
	title: "Guided Journal", 
	description: "Prompted journal for retirement reflections", 
	image: "guided-journal.jpg", 
	url: "" },
	
  { category: "Books", 
	title: "Cookbook Collection", 
	description: "Series of cookbooks for culinary exploration", 
	image: "cookbooks.jpg",
	url: ""	},
	
  { category: "Books", 
	title: "Biography Set", 
	description: "Stories of inspirational figures", 
	image: "biographies.jpg", 
	url: ""},
	
	
  { category: "Books", title: "Travel Guides", description: "Books for planning upcoming adventures", image: "travel-guides.jpg" },
  { category: "Books", title: "Hobby Instruction Books", description: "Detailed guides for new pastimes", image: "hobby-books.jpg" },
  { category: "Books", title: "Photo Book Subscription", description: "Regular custom books of personal photos", image: "photo-book.jpg" },
   
];

// Function to randomly select 8 unique gift ideas
function getRandomGiftIdeas(allGifts, count) {
  // Create a copy of the array to avoid modifying the original
  const giftsCopy = [...allGifts];
  const selectedGifts = [];
  
  // Randomly select 'count' items
  for (let i = 0; i < count && giftsCopy.length > 0; i++) {
    const randomIndex = Math.floor(Math.random() * giftsCopy.length);
    selectedGifts.push(giftsCopy[randomIndex]);
    // Remove the selected gift to avoid duplicates
    giftsCopy.splice(randomIndex, 1);
  }
  
  return selectedGifts;
}

// Function to create and display gift cards on the page
function displayGiftIdeas() {
  const container = document.getElementById('gifts-container');
  container.innerHTML = ''; // Clear previous content
  
  // Get 8 random gift ideas
  const selectedGifts = getRandomGiftIdeas(AllgiftIdeas, 8);
  
  // Create and append cards for each gift idea
  selectedGifts.forEach(gift => {
    const card = document.createElement('div');
    card.className = 'category-card';
	
	// Set a default URL if none exists for the gift
    const giftUrl = gift.url || `https://example.com/gifts/${encodeURIComponent(gift.title)}`;
    
    card.innerHTML = `
      <div class="category-img">
        <img src="images/${gift.image}" alt="${gift.title}" onerror="this.src='images/placeholder.jpg'">
      </div>
      <div class="category-content">
        <h3 class="category-title">${gift.title}</h3>
        <p class="category-description">${gift.description}</p>
		<a href="${gift.url}" class="view-gift-btn" target="_blank">View Gift</a>
      </div>
    `;
    
    container.appendChild(card);
  });
}


// Initialize the page
document.addEventListener('DOMContentLoaded', function() {
  // Get all filter buttons
  const filterButtons = document.querySelectorAll('.filter-btn');
  const categoryCards = document.querySelectorAll('.category-card');
  
  // Default filters
  let currentFilters = {
    category: 'all',
    gender: 'all',
    price: 'all'
  };
  
  // Check URL parameters for pre-selected category
  const urlParams = new URLSearchParams(window.location.search);
  const categoryParam = urlParams.get('category');
  if (categoryParam) {
    currentFilters.category = categoryParam;
    // Activate the corresponding category button if it exists
    const categoryButton = document.querySelector(`.filter-btn[data-category="${categoryParam}"]`);
    if (categoryButton) {
      categoryButton.classList.add('active');
    }
  }
  
  // Apply initial filters and display gifts
  let filteredGifts = filterGifts(AllgiftIdeas, currentFilters);
  
  // If we have too many gifts after filtering, get 8 random ones
  if (filteredGifts.length > 8) {
    filteredGifts = getRandomGiftIdeas(filteredGifts, 8);
  }
  
  displayGifts(filteredGifts, 'category-grid');
  
  // Add click event listeners to filter buttons
  filterButtons.forEach(button => {
    button.addEventListener('click', function() {
      // Remove active class from all buttons of the same type
      const filterType = this.getAttribute('data-filter-type'); // 'category', 'gender', or 'price'
      document.querySelectorAll(`.filter-btn[data-filter-type="${filterType}"]`).forEach(btn => {
        btn.classList.remove('active');
      });
      
      // Add active class to clicked button
      this.classList.add('active');
      
      // Update filters
      const filterValue = this.getAttribute('data-filter');
      currentFilters[filterType] = filterValue;
      
      // Apply filters and display gifts
      let filteredGifts = filterGifts(allGiftIdeas, currentFilters);
      
      // If we have too many gifts after filtering, get 8 random ones
      if (filteredGifts.length > 8) {
        filteredGifts = getRandomGiftIdeas(filteredGifts, 8);
      }
      
      displayGifts(filteredGifts, 'category-grid');
    });
  });
  
 // Handle category card clicks in the top category section
  document.querySelectorAll('.category-section .category-card').forEach(card => {
    card.addEventListener('click', function() {
      const category = this.getAttribute('data-category');
      
      // Update URL with the selected category
      const url = new URL(window.location.href);
      url.searchParams.set('category', category);
      window.history.pushState({}, '', url);
      
      // Update filters and UI
      currentFilters.category = category;
      
      // Remove active class from all category buttons
      document.querySelectorAll('.filter-btn[data-filter-type="category"]').forEach(btn => {
        btn.classList.remove('active');
      });
      
      // Add active class to corresponding category button
      const categoryButton = document.querySelector(`.filter-btn[data-filter-type="category"][data-filter="${category}"]`);
      if (categoryButton) {
        categoryButton.classList.add('active');
      }
      
      // Apply filters and display gifts
      let filteredGifts = filterGifts(allGiftIdeas, currentFilters);
      
      // If we have too many gifts after filtering, get 8 random ones
      if (filteredGifts.length > 8) {
        filteredGifts = getRandomGiftIdeas(filteredGifts, 8);
      }
      
      displayGifts(filteredGifts, 'category-grid');
      
      // Scroll to the gifts section
      document.getElementById('gifts-section').scrollIntoView({ behavior: 'smooth' });
    });
  });
});


document.addEventListener('DOMContentLoaded', function() {
        // Get all filter buttons and category cards
        const filterButtons = document.querySelectorAll('.filter-btn');
        const categoryCards = document.querySelectorAll('.category-card');
        
        // Add click event listeners to filter buttons
        filterButtons.forEach(button => {
            button.addEventListener('click', function() {
                // Remove active class from all buttons
                filterButtons.forEach(btn => btn.classList.remove('active'));
                
                // Add active class to clicked button
                this.classList.add('active');
                
                // Get the filter value
                const filterValue = this.getAttribute('data-filter');
                
                // Filter the category cards
                categoryCards.forEach(card => {
                    if (filterValue === 'all') {
                        card.classList.remove('hidden');
                    } else if (filterValue === 'men') {
                        if (card.getAttribute('data-tags').includes('men')) {
                            card.classList.remove('hidden');
                        } else {
                            card.classList.add('hidden');
                        }
                    } else if (filterValue === 'women') {
                        if (card.getAttribute('data-tags').includes('women')) {
                            card.classList.remove('hidden');
                        } else {
                            card.classList.add('hidden');
                        }
                    } else if (filterValue === 'under-50') {
                        if (parseInt(card.getAttribute('data-price')) < 50) {
                            card.classList.remove('hidden');
                        } else {
                            card.classList.add('hidden');
                        }
                    } else if (filterValue === 'over-100') {
                        if (parseInt(card.getAttribute('data-price')) > 100) {
                            card.classList.remove('hidden');
                        } else {
                            card.classList.add('hidden');
                        }
                    }
                });
            });
        });
        
        // Make category cards clickable
        categoryCards.forEach(card => {
            card.addEventListener('click', function() {
                const category = this.getAttribute('data-category');
                // Redirect to the category page
                window.location.href = `/category/${category}`;
                
                // If you prefer to use query parameters instead:
                // window.location.href = `/shop.html?category=${category}`;
            });
        });
        
        // Set 'All Categories' as active by default
        document.querySelector('[data-filter="all"]').classList.add('active');
    });

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
  displayGiftIdeas();
  
 // Add a refresh button functionality
    const refreshButton = document.getElementById('refresh-gifts');
    if (refreshButton) {
        refreshButton.addEventListener('click', displayGiftIdeas);
        console.log('Refresh button initialized');
    } else {
        console.error('Refresh button not found in the DOM');
    }
});

// Function to filter gifts based on category, gender, and price
function filterGifts(gifts, filters) {
  return gifts.filter(gift => {
    // Check category filter
    if (filters.category && filters.category !== 'all' && gift.category !== filters.category) {
      return false;
    }
    
    // Check gender filter
    if (filters.gender === 'men' && !gift.forMen) {
      return false;
    }
    if (filters.gender === 'women' && !gift.forWomen) {
      return false;
    }
    
    // Check price filter
    if (filters.price === 'under-50' && gift.price >= 50) {
      return false;
    }
    if (filters.price === 'over-100' && gift.price <= 100) {
      return false;
    }
    
    return true;
  });
}

// Function to create HTML for a gift card
function createGiftCardHTML(gift) {
  return `
    <div class="category-card" data-id="${gift.id}" data-category="${gift.category}">
      <div class="category-img">
        <img src="${gift.image}" alt="${gift.title}">
        <div class="price-tag">$${gift.price.toFixed(2)}</div>
      </div>
      <div class="category-content">
        <h3>${gift.title}</h3>
        <p>${gift.description}</p>
      </div>
    </div>
  `;
}

// Function to display gifts in the container
function displayGifts(gifts, containerId) {
  const container = document.getElementById(containerId);
  if (!container) return;
  
  container.innerHTML = '';
  
  if (gifts.length === 0) {
    container.innerHTML = '<div class="no-results">No gifts match your criteria. Try different filters.</div>';
    return;
  }
  
  gifts.forEach(gift => {
    container.innerHTML += createGiftCardHTML(gift);
  });
  
  // Add click event to all category cards
  document.querySelectorAll('.category-card').forEach(card => {
    card.addEventListener('click', function() {
      const giftId = this.getAttribute('data-id');
      const category = this.getAttribute('data-category');
      window.location.href = `/gift/${giftId}?category=${category}`;
    });
  });
}


// Add this at the bottom of your JavaScript file
console.log("Filter script loaded");

// Test the filter buttons
document.addEventListener('DOMContentLoaded', function() {
  console.log("DOM fully loaded");
  
  // Check if filter buttons exist
  const filterButtons = document.querySelectorAll('.filter-btn');
  console.log("Filter buttons found:", filterButtons.length);
  
  // Check if category grid exists
  const categoryGrid = document.getElementById('category-grid');
  console.log("Category grid found:", !!categoryGrid);
  
  // Add test click handler
  filterButtons.forEach(button => {
    button.addEventListener('click', function() {
      console.log("Button clicked:", this.getAttribute('data-filter-type'), this.getAttribute('data-filter'));
    });
  });
});
